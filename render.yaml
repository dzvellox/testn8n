services:
  # Application Odoo avec Supabase PostgreSQL
  - type: web
    name: odoo-app
    env: docker
    plan: free
    region: oregon
    dockerfilePath: ./Dockerfile
    envVars:
      - key: PORT
        value: 8069
      - key: DB_HOST
        # Utilise la mÃªme adresse, mais on va changer le port
        value: db.gqcygmyvdhasltkxzjcm.supabase.co
      - key: DB_PORT
        # LE CHANGEMENT EST ICI : Utilise le port du Pooler (IPv4 compatible)
        value: 6543
      - key: DB_USER
        # Assure-toi que cet utilisateur existe bien dans Supabase.
        # Sinon remets 'postgres' pour tester.
        value: odoo 
      - key: DB_PASSWORD
        value: SuperMDP2025!
      - key: DB_NAME
        value: postgres
      - key: PGSSLMODE
        value: require
      - key: PGCONNECT_TIMEOUT
        value: 10